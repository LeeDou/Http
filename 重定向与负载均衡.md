# 重定向与负载均衡

> http 并不是独立运行在网上的，很多协议都会在HTTP报文传输过程中对其数据进行管理。HTTP只关心旅程的终点（发送者和接收者），但在包含有镜像服务器、web代理和缓存的网络世界中，http报文的目的不一定是直接可达的。



## 为什么要重定向

现代网络重定向是普遍存在的

- 可靠地执行HTTP事务
- 最小化时延
- 节约网络带宽

重定向和负载均衡是共存的，大多数重定向部署都包含了某些形式的负载均衡。



## 重定向到何地

从客户端发送HTTP请求，目标对其处理的的角度来看，服务器、代理、缓存和网关对客户端来说服务器。

Web服务器会根据每个IP来处理请求。将请求分摊复制到分摊到复制的服务器中去，就意味着应该把对应的URL的每条请求发送到最佳的Web服务器上去（最靠近客户端、或负载最轻的或采用其它优化策略选择的服务器）

代理希望根据每个协议来处理请求。



## 重定向协议

重定向目标是尽快地将HTTP报文发送到可用的Web服务器上去。

- 配置创建客户端报文的浏览器应用程序，使其报文发送给代理服务器。
- DNS 解析程序会选择用于报文寻址的IP地址，对于不同物理地域的不同客户端来说，这个IP地址可能不同
- 报文经过网络传输时，会被划分成一些带有地址的分组，交换机和路由器会检查分组中的TCP/IP 地址，并据此来确定分组的发送路线。
- Web服务器可以通过HTTP重定向将重定向请求反弹给不同的web服务器

### 通用的重定向方法：

- HTTP重定向
- DNS重定向
- 任播寻址
- IP MAC 转发
- IP地址转发

### 将报文重定向到代理服务器的重定向方法

- 显示浏览器配置
- 代理自动配置（PAC）
- Web Proxy 代理自动发现协议（WPAD）
- Web 缓存协调协议（WCCP）
- 因特网缓存协议（ICP）
- 缓存分组路由协议（CARP）
- 超文本缓存协议（HTCP）



对于重定向方法将在以后给出详细解释



